---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import ProjectCard from '../components/ProjectCard.astro';

const allProjects = await getCollection('proyectos');
// @ts-ignore
const sortedProjects = allProjects.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<Layout title="Nuestros Proyectos | Elevawod" description="Un vistazo a todos los proyectos que hemos realizado.">
  <main class="container">
    <h1 class="page-title">Todos Nuestros Proyectos</h1>
    <div class="project-grid">
      {sortedProjects.map(project => (
        <ProjectCard project={project} />
      ))}
    </div>
  </main>
</Layout>

<style>
  .container {
    max-width: 1200px;
    margin: 2rem auto;
    padding: 0 2rem;
  }
  .page-title {
    font-size: 2.5rem;
    font-weight: bold;
    text-align: center;
    margin-bottom: 2rem;
  }
  .project-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }
</style>